---
title: "checking"
author: "linh"
date: '2022-05-26'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.


```{r load skinny boi}
tcga_exp = readRDS("path/to/your/directory/tcga_tumor_log2TPM.RDS")


```


```{r pull gene expression value}

################################################## geneensemble for Skinny Boy

GeneNamesSB <- rownames(SkinnyBoy)


gene_identifierSB <- strsplit(GeneNamesSB, split = "|", fixed = TRUE)

length (genes_ensembl_SB)
genes_ens_SB<- sapply(gene_identifierSB, FUN = function(gene_identifierSB){
  ens = gene_identifierSB[1]
  return(ens)
})

genes_symbol_SB<- sapply(gene_identifierSB, FUN = function(gene_identifierSB){
  ens = gene_identifierSB[2]
  return(ens)
})


# remove version number

genes_ens_vn_SB <- strsplit(genes_ens_SB, split = ".", fixed = TRUE)
genes_ensembl_SB <- sapply(genes_ens_vn_SB, FUN = function(genes_ens_vn_SB){
  ens = genes_ens_vn_SB[1]
  return(ens)
})

######

saveRDS (genes_ensembl_SB, file = "C:/Users/trinh/Documents/GitHub/2022-topic-02-team-01/Breast cancer/Datas/genes_ensembl.RDS")

############################################################################# HERE I TRY STUFFS. NO NEED TO READ

banana1 = -match(unlist(x$ID),genes_ensembl_SB)
length (banana1)
banana2 <- banana1[!is.na(banana1)]
non_pathway_geneexp_patient1_vector_k = SkinnyBoy[banana2,1]

View (banana2)


###### try stuffs
banana3 = match(unlist(x$ID[1]),genes_ensembl_SB)
length (banana3)
View(x$ID)


banana4 = -match(unlist(x$ID[1]),genes_ensembl_SB)
length (banana4)
  banana5 <- banana4[!is.na(banana4)]
non_pathway_geneexp_patient1_vector_SB  = SkinnyBoy[banana5,1]

length (non_pathway_geneexp_patient1_vector_SB)

dim (SkinnyBoy)

# STARTING FROM HERE IS MEANINGFUL CODE 
#############################################################################

SkinnyHappyTT <- readRDS("C:/Userstrinh/Documents/GitHub/DATATSETS/SkinnyHappyTT.RDS.rds") 

############### 1st patient 1st pathway
pathway_geneexp_patient_SB = list ()
pathway_geneexp_patient_SB [[1]]= SkinnyBoy[match(unlist(x$ID[1]), genes_ensembl_SB), 1]
 banana6= -match(unlist(x$ID[1]),genes_ensembl_SB)
  banana7 <- banana6[!is.na(banana6)]
  non_pathway_geneexp_patient1_vector_SB = SkinnyBoy[banana7,1]
t.test(pathway_geneexp_patient_SB[[1]], non_pathway_geneexp_patient1_vector_SB)$p.value

########



###########  1st patient  all pathway 

df_pathway_patient_SB = data.frame()
for (i in 1:46){
  pathway_geneexp_patient_SB [[i]]= SkinnyBoy[match(unlist(x$ID[i]), genes_ensembl_SB), 1]
  banana6= -match(unlist(x$ID[i]),genes_ensembl_SB)
  banana7 <- banana6[!is.na(banana6)]
  non_pathway_geneexp_patient1_vector_SB = SkinnyBoy[banana7,1]
  df_pathway_patient_SB[i,1] = t.test(pathway_geneexp_patient_SB[[i]], non_pathway_geneexp_patient1_vector_SB)$p.value
}
  pathway_geneexp_patient_lalalal = list ()
df_pathway_patient_SB_new = data.frame()
View (df_pathway_patient_SB)


################### ALL PATIENT ALL PATHWAYS (FIXED)
for (m in 1:9741){
  for (n in 1:46){
      pathway_geneexp_patient_SB[[n]]= SkinnyBoy[match(unlist(x$ID[n]),genes_ensembl_SB),m]
     banana = -match(unlist(x$ID[n]),genes_ensembl_SB)
     banana <- banana[!is.na(banana)]
     non_pathway_geneexp_patient_vector_SB = SkinnyBoy[banana,m]
     df_pathway_patient_SB[n,m] = t.test(pathway_geneexp_patient_SB[[n]], non_pathway_geneexp_patient_vector_SB)$p.value
     
  }
}




#################################### do it for all patients in Skinny boy (olt version non fixed)


banana = -match(unlist(x$ID),genes_ensembl)
banana <- banana[!is.na(banana)]
 pathway_geneexp_patient_S = list ()

df_pathway_patient_S = data.frame ()
 non_pathway_geneexp_patient_vector_S = SkinnyBoy[banana]
for (m in 1:9741){
  for (n in 1:46){
      pathway_geneexp_patient_S[[n]]= SkinnyBoy[match(unlist(x$ID[n]),genes_ensembl),m]
     banana = -match(unlist(x$ID[n]),genes_ensembl)
     banana <- banana[!is.na(banana)]
     non_pathway_geneexp_patient_vector_S = SkinnyBoy[banana,m]
     df_pathway_patient_S[n,m] = t.test(pathway_geneexp_patient_S[[n]], non_pathway_geneexp_patient_vector_S)$p.value

  }
  
}


###########################################




## saving datas 

saveRDS(pathway_geneexp, file = "C:/Users/trinh/Documents/GitHub/2022-topic-02-team-01/Breast cancer/PathwayDataSet/Objects/pathway_geneexp")

pathway_geneexp[1]


SkinnyBoy = readRDS("C:/Users/trinh/Documents/GitHub/DATATSETS/SkinnyBoy.RDS")



SkinnyHappyTT = readRDS("C:/Users/trinh/Documents/GitHub/DATATSETS/SkinnyHappyTT.RDS.RDS")

View (SkinnySadTT)

SkinnySadTT =  readRDS("C:/Users/trinh/Documents/GitHub/DATATSETS/SkinnySadTT.RDS.RDS")

```

